<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project ต้นแบบ 5: Biochar AI Monitoring</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 25px; /* Padding for the body of this iframe content */
            background-color: #f8f9fa; /* Light background for the overall prototype page */
        }
        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8em;
            color: #e67e22; /* Orange accent for main prototype title */
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
            margin-top: 0;
        }
        h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4em;
            color: #34495e;
            text-align: left;
            margin-top: 35px;
            margin-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 5px;
        }
        p {
            margin-bottom: 15px;
            font-size: 0.95em;
        }
        .section-description {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-bottom: 30px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .feature-card {
            background-color: #e0f2f1; /* Light cyan-green for this project's features */
            border: 1px solid #a7d9d9;
            border-left: 5px solid #20B2AA; /* Teal accent */
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: left;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        .feature-card i {
            font-size: 2.5em;
            color: #20B2AA; /* Teal for icons */
            flex-shrink: 0;
        }
        .feature-card .text-content strong {
            display: block;
            font-size: 1.1em;
            color: #34495e;
            margin-bottom: 5px;
        }
        .feature-card .text-content p {
            font-size: 0.85em;
            color: #555;
            margin: 0;
        }

        /* --- UI Mockup Styles (consistent with previous phases) --- */
        .ui-mockup-section {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 40px;
        }
        .ui-mockup-section:nth-of-type(odd) { background-color: #eef4f7; }
        .ui-mockup-section:nth-of-type(even) { background-color: #f8f8f8; }

        .ui-mockup-box {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fff;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .ui-header {
            background-color: #4a90e2;
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1em;
        }
        .ui-header .app-name {
            font-size: 1.2em;
        }
        .ui-content {
            padding: 15px;
            min-height: 150px;
            color: #555;
            font-size: 0.95em;
        }
        .ui-content strong {
            color: #333;
        }
        .ui-content .data-row {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
        }
        .ui-content .data-row:last-child {
            border-bottom: none;
        }
        .ui-content .placeholder-text {
            color: #777;
            font-style: italic;
            text-align: center;
            margin-top: 50px;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; font-weight: 600; }
        
        /* --- Camera Feed HTML Mockup Styles --- */
        .camera-feed-html {
            width: 100%;
            height: 250px; /* Consistent height for camera view */
            background-color: #1a1a1a; /* Dark background to simulate camera feed */
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid #333;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .camera-feed-html .feed-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #eee;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            padding: 10px;
        }
        .camera-feed-html .feed-status-bar {
            width: 100%;
            background-color: rgba(0,0,0,0.6);
            color: white;
            font-size: 0.8em;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .camera-feed-html .detection-box {
            position: absolute;
            border: 2px solid #00ff00; /* Green bounding box */
            background-color: rgba(0,255,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            font-weight: bold;
            color: #00ff00;
        }
        .camera-feed-html .overlay-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 1.1em;
            white-space: nowrap;
        }

        /* --- Chart Placeholder for Biochar (Line Chart) --- */
        .chart-html-mockup {
            width: 100%;
            height: 150px; /* Fixed height for the chart area */
            background-color: #fcfcfc;
            border-left: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            position: relative;
            overflow: hidden;
            margin: 10px auto;
        }
        .chart-line-point {
            position: absolute;
            width: 10px; height: 10px;
            background-color: #e67e22; /* Orange point */
            border-radius: 50%;
            transform: translateX(-50%) translateY(50%); /* Center the circle */
            z-index: 10;
        }
        .chart-line-point::before { /* Value label */
            content: attr(data-value);
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em;
            color: #333;
            font-weight: bold;
            white-space: nowrap;
        }
        .chart-line-point::after { /* X-axis label */
            content: attr(data-label);
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em;
            color: #777;
            white-space: nowrap;
        }
        .chart-line-segment {
            position: absolute;
            height: 2px;
            background-color: #3498db; /* Blue line */
            transform-origin: 0 0;
            z-index: 8;
        }
    </style>
</head>
<body>
    <div class="phase-section">
        <h3><i class="fas fa-tree"></i> Project ต้นแบบ 5: ระบบควบคุมคุณภาพและติดตามการผลิต 'ทองคำดำ' (Biochar)</h3>
        <p class="section-description">
            โครงการนี้ผสาน Camera AI และ AI Automation เพื่อตรวจสอบและควบคุมคุณภาพตลอดกระบวนการผลิต Biochar
            ตั้งแต่การตรวจสอบวัตถุดิบไปจนถึงการประเมินผลิตภัณฑ์สำเร็จรูป.
        </p>

        <h4><i class="fas fa-check-double"></i> ฟังก์ชันการทำงานหลัก (Features)</h4>
        <div class="feature-grid">
            <div class="feature-card">
                <i class="fas fa-seedling"></i>
                <div class="text-content">
                    <strong>Raw Material Inspection</strong>
                    <p>AI Camera ตรวจสอบคุณภาพวัตถุดิบ (Biomass) ก่อนเข้าสู่กระบวนการผลิต Biochar.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-fire-alt"></i>
                <div class="text-content">
                    <strong>In-Process Monitoring</strong>
                    <p>AI Camera ตรวจสอบกระบวนการผลิต (เช่น อุณหภูมิ, สีควัน) เพื่อควบคุมคุณภาพการเผา.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-flask"></i>
                <div class="text-content">
                    <strong>Final Product Quality Assessment</strong>
                    <p>AI Camera ประเมินคุณภาพ Biochar ที่ผลิตได้ (เช่น ขนาด, สี, สิ่งเจือปน).</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-clipboard-check"></i>
                <div class="text-content">
                    <strong>Automated Data Logging & Reporting</strong>
                    <p>บันทึกข้อมูลการผลิตและผลการตรวจสอบคุณภาพลงระบบอัตโนมัติ.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-exclamation-circle"></i>
                <div class="text-content">
                    <strong>Anomaly Detection & Alerts</strong>
                    <p>แจ้งเตือนอัตโนมัติเมื่อตรวจพบความผิดปกติในกระบวนการผลิตหรือคุณภาพสินค้า.</p>
                </div>
            </div>
        </div>

        <h4><i class="fas fa-bezier-curve"></i> ตัวอย่างหน้าจอ UI</h4>

        <div class="ui-mockup-section">
            <h4>Camera AI: Raw Material Inspection (การตรวจสอบวัตถุดิบ)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-tractor"></i> AI Camera: Biomass Input</span>
                    <i class="fas fa-circle" style="color: #28a745; font-size: 0.6em;"></i> Live
                </div>
                <div class="camera-feed-html" style="background-color: #34495e;">
                    <div class="feed-content">
                        <i class="fas fa-leaf fa-3x" style="color:rgba(255,255,255,0.7);"></i>
                        <br>Biomass Quality Check
                    </div>
                    <div class="detection-box" style="left: 15%; top: 25%; width: 30%; height: 50%; border-color:#00ff00;">Quality: OK</div>
                    <div class="feed-status-bar">
                        <span>Source: Conveyor | AI Model: BiomassQC v1.0</span>
                        <span>Status: Processing</span>
                    </div>
                </div>
                <div class="ui-content">
                    <p><strong>สถานะวัตถุดิบ:</strong> <span class="process-status-indicator status-ok">ผ่านการตรวจสอบ (คุณภาพดี)</span></p>
                    <p><strong>ประเภท:</strong> ไม้ไผ่ | <strong>ความชื้นโดยประมาณ:</strong> 15%</p>
                </div>
            </div>
        </div>

        <div class="ui-mockup-section">
            <h4>Camera AI: Production Process Monitoring (การติดตามกระบวนการผลิต)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-thermometer-half"></i> AI Camera: Kiln Monitor</span>
                    <i class="fas fa-circle" style="color: #e67e22; font-size: 0.6em;"></i> Alert
                </div>
                <div class="camera-feed-html" style="background-color: #5d6d7e;">
                    <div class="feed-content">
                        <i class="fas fa-fire fa-3x" style="color: orange;"></i>
                        <br>Kiln Status Monitoring
                    </div>
                    <div class="overlay-text" style="background-color: rgba(220,53,69,0.7);">ALERT: Abnormal Flame Detected!</div>
                    <div class="feed-status-bar">
                        <span>Zone: Kiln 1 | AI Model: CombustionMonitor v1.0</span>
                        <span><i class="fas fa-exclamation-triangle" style="color:white;"></i> Alert Sent</span>
                    </div>
                </div>
                <div class="ui-content">
                    <p><strong>สถานะกระบวนการ:</strong> <span class="process-status-indicator status-warning">ตรวจพบความผิดปกติของเปลวไฟ</span></p>
                    <p><strong>คำแนะนำ:</strong> ตรวจสอบอุณหภูมิเตาเผา | <strong>แจ้งเตือน:</strong> ส่ง Line Notify ถึงหัวหน้างาน</p>
                </div>
            </div>
        </div>
        
        <div class="ui-mockup-section">
            <h4>Camera AI: Final Product Quality Assessment (การประเมินคุณภาพผลิตภัณฑ์)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-microscope"></i> AI Camera: Biochar QC</span>
                    <i class="fas fa-circle" style="color: #28a745; font-size: 0.6em;"></i> Ready
                </div>
                <div class="camera-feed-html" style="background-color: #7b8d9a;">
                    <div class="feed-content">
                        <i class="fas fa-vial fa-3x" style="color: #90CAF9;"></i>
                        <br>Product QC Inspection
                    </div>
                    <div class="detection-box" style="left: 20%; top: 20%; width: 60%; height: 60%; border-color:#00ff00;">Quality: Excellent</div>
                    <div class="feed-status-bar">
                        <span>Product: Biochar Batch #B001 | AI Model: CharQuality v1.0</span>
                        <span><i class="fas fa-check-circle" style="color:#28a745;"></i> Data Logged</span>
                    </div>
                </div>
                <div class="ui-content">
                    <p><strong>คุณภาพ Biochar:</strong> <span class="process-status-indicator status-ok">ยอดเยี่ยม (สีสม่ำเสมอ, ขนาดเหมาะสม)</span></p>
                    <p><strong>สถานะ:</strong> พร้อมบรรจุ | <strong>บันทึก:</strong> ลง Google Sheet/AppSheet อัตโนมัติ</p>
                </div>
            </div>
        </div>

        <div class="ui-mockup-section">
            <h4>Production & Quality Dashboard (Dashboard ภาพรวม)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-chart-area"></i> Biochar Production Dashboard</span>
                    <i class="fas fa-file-invoice"></i>
                </div>
                <div class="ui-content">
                    <p><strong>สถานะการผลิตปัจจุบัน:</strong> <span class="process-status-indicator status-ok">กำลังผลิต (Batch #B001)</span></p>
                    <div style="display:flex; justify-content:space-around; margin-bottom:20px;">
                        <div style="text-align:center;">
                            <span style="font-size:1.8em; font-weight:bold; color:#3498db;">98%</span><br>
                            <span style="font-size:0.8em; color:#666;">คุณภาพวัตถุดิบเฉลี่ย</span>
                        </div>
                        <div style="text-align:center;">
                            <span style="font-size:1.8em; font-weight:bold; color:#e67e22;">1</span><br>
                            <span style="font-size:0.8em; color:#666;">แจ้งเตือนวันนี้</span>
                        </div>
                        <div style="text-align:center;">
                            <span style="font-size:1.8em; font-weight:bold; color:#28a745;">1.5 ตัน</span><br>
                            <span style="font-size:0.8em; color:#666;">ผลิตได้วันนี้</span>
                        </div>
                    </div>
                    <h5 style="margin-top:0; margin-bottom:10px; text-align:left;">แนวโน้มคุณภาพ Biochar (รายสัปดาห์)</h5>
                    <div class="chart-html-mockup" style="height:150px;">
                        <div class="chart-line-point" style="left: 10%; bottom: 135px;" data-value="90%" data-label="สัปดาห์1"></div>
                        <div class="chart-line-point" style="left: 35%; bottom: 138px;" data-value="92%" data-label="สัปดาห์2"></div>
                        <div class="chart-line-point" style="left: 60%; bottom: 142.5px;" data-value="95%" data-label="สัปดาห์3"></div>
                        <div class="chart-line-point" style="left: 85%; bottom: 147px;" data-value="98%" data-label="สัปดาห์4"></div>

                        <div class="chart-line-segment" style="left: 10%; top: calc(150px - 135px - 5px); width: 25%; transform: rotate(5deg);"></div> 
                        <div class="chart-line-segment" style="left: 35%; top: calc(150px - 138px - 5px); width: 25%; transform: rotate(5deg);"></div>
                        <div class="chart-line-segment" style="left: 60%; top: calc(150px - 142.5px - 5px); width: 25%; transform: rotate(5deg);"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="ui-mockup-section">
            <h4>Automated Alert Log (บันทึกการแจ้งเตือนอัตโนมัติ)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-bell"></i> System Alerts & Notifications</span>
                    <i class="fas fa-history"></i>
                </div>
                <div class="ui-content">
                    <table>
                        <thead>
                            <tr>
                                <th>เวลา</th>
                                <th>ประเภท</th>
                                <th>รายละเอียด</th>
                                <th>สถานะ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>2025-08-01 14:30</td><td>Process</td><td>Abnormal Flame in Kiln 1</td><td><span class="process-status-indicator status-warning">แจ้งเตือนแล้ว</span></td></tr>
                            <tr><td>2025-08-01 10:15</td><td>Quality</td><td>Biomass Quality Low</td><td><span class="process-status-indicator status-ok">แก้ไขแล้ว</span></td></tr>
                            <tr><td>2025-07-31 22:00</td><td>Production</td><td>Batch #B001 Completed</td><td><span class="process-status-indicator status-ok">บันทึกแล้ว</span></td></tr>
                        </tbody>
                    </table>
                    <p class="placeholder-text" style="margin-top:20px;">บันทึกข้อมูลโดย AI Automation (n8n)</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        function sendHeightToParent() {
            const body = document.body;
            const height = body.scrollHeight; 
            if (window.parent && window.parent.postMessage) {
                window.parent.postMessage({ 
                    type: 'iframeHeight', 
                    height: height, 
                    iframeId: window.name 
                }, '*'); 
            }
        }
        window.addEventListener('load', sendHeightToParent);
        window.addEventListener('resize', sendHeightToParent);
        setTimeout(sendHeightToParent, 500); // Also send after a small delay
    </script>
</body>
</html>