<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project ต้นแบบ 2: Object Counting AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 25px; /* Padding for the body of this iframe content */
            background-color: #f8f9fa; /* Light background for the overall prototype page */
        }
        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8em;
            color: #e67e22; /* Orange accent for main prototype title */
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
            margin-top: 0;
        }
        h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4em;
            color: #34495e;
            text-align: left;
            margin-top: 35px;
            margin-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 5px;
        }
        p {
            margin-bottom: 15px;
            font-size: 0.95em;
        }
        .section-description {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-bottom: 30px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .feature-card {
            background-color: #e3f2fd; /* Light blue for this project's features */
            border: 1px solid #aed6f1;
            border-left: 5px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: left;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        .feature-card i {
            font-size: 2.5em;
            color: #3498db; /* Blue for icons */
            flex-shrink: 0;
        }
        .feature-card .text-content strong {
            display: block;
            font-size: 1.1em;
            color: #34495e;
            margin-bottom: 5px;
        }
        .feature-card .text-content p {
            font-size: 0.85em;
            color: #555;
            margin: 0;
        }

        /* --- UI Mockup Styles (consistent with previous phases) --- */
        .ui-mockup-section {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 40px;
        }
        .ui-mockup-section:nth-of-type(odd) { background-color: #eef4f7; }
        .ui-mockup-section:nth-of-type(even) { background-color: #f8f8f8; }

        .ui-mockup-box {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fff;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .ui-header {
            background-color: #4a90e2;
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1em;
        }
        .ui-header .app-name {
            font-size: 1.2em;
        }
        .ui-content {
            padding: 15px;
            min-height: 150px;
            color: #555;
            font-size: 0.95em;
        }
        .ui-content strong {
            color: #333;
        }
        .ui-content .data-row {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
        }
        .ui-content .data-row:last-child {
            border-bottom: none;
        }
        .ui-content .placeholder-text {
            color: #777;
            font-style: italic;
            text-align: center;
            margin-top: 50px;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; font-weight: 600; }
        
        /* --- Camera Feed HTML Mockup Styles --- */
        .camera-feed-html {
            width: 100%;
            height: 300px; /* Increased height for better visual */
            background-color: #1a1a1a; 
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid #333;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .camera-feed-html .feed-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #eee;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            padding: 10px;
        }
        .camera-feed-html .feed-status-bar {
            width: 100%;
            background-color: rgba(0,0,0,0.6);
            color: white;
            font-size: 0.8em;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .camera-feed-html .detection-box {
            position: absolute;
            border: 2px solid #00ff00; /* Green bounding box */
            background-color: rgba(0,255,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            font-weight: bold;
            color: #00ff00;
        }
        .camera-feed-html .count-display {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(52,152,219,0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 1.8em;
            font-weight: bold;
            z-index: 10;
        }

        /* --- HTML BAR CHART STYLES (for Historical Counting) --- */
        .bar-chart-container {
            width: 100%;
            height: 150px; /* Fixed height for the chart area */
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 10px 0;
            border-left: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            box-sizing: border-box;
            background-color: #fcfcfc;
        }
        .bar {
            width: 15%; /* Width of each bar */
            background-color: #4a90e2; /* Blue for bars */
            margin: 0 2%; /* Space between bars */
            position: relative;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            color: white;
            font-size: 0.7em;
            font-weight: bold;
            border-radius: 3px 3px 0 0;
            transition: all 0.3s ease-in-out;
        }
        .bar-label {
            position: absolute;
            bottom: -20px;
            font-size: 0.7em;
            color: #777;
            white-space: nowrap;
        }
        .bar-value-top {
            position: absolute;
            top: -15px;
            color: #333;
            font-size: 0.7em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="phase-section">
        <h3><i class="fas fa-calculator"></i> Project ต้นแบบ 2: ระบบตรวจนับวัตถุเคลื่อนไหวด้วย Camera AI</h3>
        <p class="section-description">
            โครงการนี้สาธิตการนำ Camera AI มาใช้ในการตรวจจับและนับจำนวนวัตถุที่มีการเคลื่อนไหวแบบ Real-time,
            พร้อมการบันทึกและแสดงผลข้อมูลเชิงสถิติ.
        </p>

        <h4><i class="fas fa-check-double"></i> ฟังก์ชันการทำงานหลัก (Features)</h4>
        <div class="feature-grid">
            <div class="feature-card">
                <i class="fas fa-video"></i>
                <div class="text-content">
                    <strong>Real-time Object Detection & Counting</strong>
                    <p>AI ตรวจจับและนับจำนวนวัตถุที่เคลื่อนไหวในพื้นที่ที่กำหนดแบบสดๆ.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-chart-bar"></i>
                <div class="text-content">
                    <strong>Historical Count Dashboard</strong>
                    <p>แสดงข้อมูลสถิติการนับวัตถุในแต่ละช่วงเวลา (รายชั่วโมง, รายวัน) ผ่าน Dashboard ที่เข้าใจง่าย.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-bell"></i>
                <div class="text-content">
                    <strong>Threshold-based Alerts</strong>
                    <p>แจ้งเตือนอัตโนมัติ (ผ่าน Line/Email) เมื่อจำนวนวัตถุเกิน/ขาดจากเกณฑ์ที่กำหนด.</p>
                </div>
            </div>
            <div class="feature-card">
                <i class="fas fa-object-ungroup"></i>
                <div class="text-content">
                    <strong>Configurable Counting Zones</strong>
                    <p>สามารถกำหนดพื้นที่ หรือโซนการนับได้เอง เพื่อให้ระบบทำงานได้ตรงตามความต้องการ.</p>
                </div>
            </div>
        </div>

        <h4><i class="fas fa-bezier-curve"></i> ตัวอย่างหน้าจอ UI</h4>

        <div class="ui-mockup-section">
            <h4>Live Camera AI Counting (การนับแบบ Real-time)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-camera-retro"></i> Live Counting Feed: กระด้งปู</span>
                    <i class="fas fa-circle" style="color: #28a745; font-size: 0.6em;"></i> Live
                </div>
                <div class="camera-feed-html" style="background-color: #40e0d0; /* Changed background for variety */">
                    <div class="feed-content">
                        <span class="count-display">Detected: 15 Crabs</span>
                        <div class="detection-box" style="left: 10%; top: 20%; width: 15%; height: 20%;">Crab 1</div>
                        <div class="detection-box" style="left: 30%; top: 40%; width: 10%; height: 15%;">Crab 2</div>
                        <div class="detection-box" style="left: 55%; top: 10%; width: 12%; height: 18%;">Crab 3</div>
                        <div class="detection-box" style="left: 70%; top: 60%; width: 18%; height: 25%;">Crab 4</div>
                    </div>
                    <div class="feed-status-bar">
                        <span>Zone: กระด้ง 1 | AI Model: ObjectCounter v1.0</span>
                        <span>FPS: 25 | <i class="fas fa-circle" style="color:#28a745;"></i> Active</span>
                    </div>
                </div>
                <div class="ui-content">
                    <p><strong>จำนวนปูที่ตรวจจับได้:</strong> <span style="font-weight: bold; color: #28a745;">15 ตัว (Real-time)</span></p>
                    <p><strong>สถานะ:</strong> อยู่ในเกณฑ์ | <strong>แจ้งเตือน:</strong> ส่ง Line Notify เมื่อเกิน 20 ตัว</p>
                </div>
            </div>
        </div>

        <div class="ui-mockup-section">
            <h4>Historical Counting Data (ข้อมูลการนับย้อนหลัง)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-chart-area"></i> Counting Report: Weekly Crabs</span>
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="ui-content">
                    <p><strong>สรุปจำนวนปูที่นับได้ (สัปดาห์ล่าสุด):</strong></p>
                    <div class="bar-chart-container">
                        <div class="bar" style="height: 60%;"><span class="bar-value-top">1250</span><span class="bar-label">สัปดาห์1</span></div>
                        <div class="bar" style="height: 80%; background-color: #2ecc71;"><span class="bar-value-top">1180</span><span class="bar-label">สัปดาห์2</span></div>
                        <div class="bar" style="height: 70%;"><span class="bar-value-top">1300</span><span class="bar-label">สัปดาห์3</span></div>
                        <div class="bar" style="height: 95%; background-color: #e67e22;"><span class="bar-value-top">1220</span><span class="bar-label">สัปดาห์4</span></div>
                        <div class="bar" style="height: 50%;"><span class="bar-value-top">980</span><span class="bar-label">สัปดาห์5</span></div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>วันที่</th>
                                <th>จำนวนนับรวม</th>
                                <th>เฉลี่ย/ชม.</th>
                                <th>แจ้งเตือน</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>2025-08-01</td><td>1,250</td><td>15.6</td><td>0</td></tr>
                            <tr><td>2025-07-31</td><td>1,180</td><td>14.7</td><td>0</td></tr>
                            <tr><td>2025-07-30</td><td>1,300</td><td>16.2</td><td>1</td></tr>
                            <tr><td>2025-07-29</td><td>1,220</td><td>15.2</td><td>0</td></tr>
                            <tr><td>2025-07-28</td><td>980</td><td>12.2</td><td>0</td></tr>
                        </tbody>
                    </table>
                    <p class="placeholder-text" style="margin-top:20px;">ข้อมูลบันทึกและแสดงผลผ่าน Google Sheet/AppSheet Dashboard</p>
                </div>
            </div>
        </div>
        
        <div class="ui-mockup-section">
            <h4>Counting Zone Configuration (การกำหนดโซนการนับ)</h4>
            <div class="ui-mockup-box">
                <div class="ui-header">
                    <span class="app-name"><i class="fas fa-draw-polygon"></i> AI Settings: Counting Zones</span>
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <div class="camera-feed-html" style="background-color:#778899;">
                    <div class="feed-content" style="position:relative;">
                        <i class="fas fa-video fa-2x" style="color:rgba(255,255,255,0.7);"></i> Camera View
                        <div style="position: absolute; border: 2px dashed yellow; width: 60%; height: 50%; top: 25%; left: 20%; display: flex; align-items: center; justify-content: center; color: yellow; font-weight: bold; font-size: 1.1em; background-color: rgba(255,255,0,0.1);">
                            Counting Zone 1
                        </div>
                        <div style="position: absolute; border: 2px dashed #f1c40f; width: 30%; height: 25%; top: 10%; right: 5%; display: flex; align-items: center; justify-content: center; color: #f1c40f; font-weight: bold; font-size: 0.9em; background-color: rgba(241,196,15,0.1);">
                            Zone 2
                        </div>
                    </div>
                    <div class="feed-status-bar">
                        <span>Camera: Main | Status: Active</span>
                        <span>Drag & Resize Zones</span>
                    </div>
                </div>
                <div class="ui-content">
                    <p><strong>โซนที่กำหนด:</strong> กระด้ง 1 (Active), กระด้ง 2 (Inactive)</p>
                    <p class="placeholder-text">สามารถลากและวางเพื่อกำหนดพื้นที่การนับบนหน้าจอ (Mockup).</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        function sendHeightToParent() {
            const body = document.body;
            const height = body.scrollHeight; 
            if (window.parent && window.parent.postMessage) {
                window.parent.postMessage({ 
                    type: 'iframeHeight', 
                    height: height, 
                    iframeId: window.name 
                }, '*'); 
            }
        }
        window.addEventListener('load', sendHeightToParent);
        window.addEventListener('resize', sendHeightToParent);
        setTimeout(sendHeightToParent, 500); // Also send after a small delay
    </script>
</body>
</html>